"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{52508:function(e,t,i){i.d(t,{Y:function(){return d}});var s=i(41807),l=i(15002),n=i(69918),r=i(22311),o=i(49923),a=i(15484),h=function(){return(h=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var l in t=arguments[i])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},d=function(){function e(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return e.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},e.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},e.prototype.fDataUpdate=function(e){if(!this.isMultiSelection&&(!(0,s.le)(e.cellIndex)||!(0,s.le)(e.rowIndex))){var t=this.getRowObj((0,s.le)(e.rowIndex)?(0,s.le)(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},e.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},e.prototype.getModuleName=function(){return"selection"},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+a.uD)||e.querySelector("."+a.ci))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),s.bi.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),s.bi.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},e.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},e.prototype.getSelectedMovableRow=function(e){var t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector("."+a.L2)?t.getMovableRowByIndex(e):null},e.prototype.getSelectedFrozenRightRow=function(e){var t=this.parent;return t.isFrozenGrid()&&t.getFrozenMode()===a.v3&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null},e.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"!==e.editSettings.mode||!e.editModule)return e.getCurrentViewRecords();var t=(0,n.Wn)(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges()[a.$0]):this.parent.editModule.getBatchChanges()[a.$0].concat(t);for(var i=this.parent.editModule.getBatchChanges()[a.k0],s=this.parent.getPrimaryKeyFieldNames()[0],l=0;l<i.length;l++)for(var r=0;r<t.length;r++)if(i[parseInt(l.toString(),10)][""+s]===t[parseInt(r.toString(),10)][""+s]){t.splice(r,1);break}return t},e.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([e]);return}var i,s,l=this.parent,n=l.getRowByIndex(e),o=n&&l.getRowObjectFromUID(n.getAttribute("data-uid"));if(!this.isPartialSelection||!o||!o.isDataRow||o.isSelectable){var a=this.getSelectedMovableRow(e),h=this.getSelectedFrozenRightRow(e);if(l.enableVirtualization&&e>-1){var d={selectedIndex:e,isAvailable:!0};this.parent.notify(r.I3$,d);var c=l.isFrozenGrid()?l.contentModule.getRowObjectByIndex(e):null;if(n&&(l.getRowObjectFromUID(n.getAttribute("data-uid"))||c))i=c||l.getRowObjectFromUID(n.getAttribute("data-uid")).data;else{d.isAvailable&&!l.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection();return}}else i=this.getRowObj(e).data;if(!(!this.isRowType()||!n||this.isEditing())){var p=n.hasAttribute("aria-selected");this.activeTarget(),t=t?!!this.selectedRowIndexes.length&&1===this.selectedRowIndexes.length&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&e===this.selectedRowIndexes[0]:t,this.isKeyAction=!1;var g="cancel";t?this.rowSelectingCallBack(s,t,e,i,!1,p,g)(s):(s={data:i,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:l.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},s=this.addMovableArgs(s,a,h),this.parent.trigger(r.Od5,this.fDataUpdate(s),this.rowSelectingCallBack(s,t,e,i,!1,p,g)))}}},e.prototype.rowSelectingCallBack=function(e,t,i,l,n,r,o){var a=this;return function(e){if(!(0,s.le)(e)&&!0===e[""+o]){a.disableInteracted();return}a.index=i,a.toggle=t,a.data=l,a.removed=n,r&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode?(a.clearSelectedRow(i),a.selectRowCallBack()):!r&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode&&a.selectRowCallBack(),"ResetOnRowClick"===a.selectionSettings.checkboxMode&&(a.isCheckboxReset=!0,a.clearSelection()),a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode&&(a.parent.isCheckBoxSelection||!a.selectionSettings.persistSelection)||(a.selectRowCheck=!0,a.clearRow())}},e.prototype.selectRowCallBack=function(){var e,t=this.parent,i=this.index,s=this.toggle,l=this.data,n=this.removed,o=t.getRowByIndex(i),a=this.getSelectedMovableRow(i),h=this.getSelectedFrozenRightRow(i);s||n||(-1>=this.selectedRowIndexes.indexOf(i)&&(this.updateRowSelection(o,i),this.selectMovableRow(a,h,i)),this.selectRowIndex(i)),s||(e={data:l,rowIndex:i,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},e=this.addMovableArgs(e,a,h),this.onActionComplete(e,r.Ypq)),this.isInteracted=!1,this.updateRowProps(i)},e.prototype.selectMovableRow=function(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),this.parent.getFrozenMode()===a.v3&&t&&this.updateRowSelection(t,i))},e.prototype.addMovableArgs=function(e,t,i){if(this.parent.isFrozenGrid()){var s={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};this.parent.getFrozenMode()===a.v3&&i&&(s.frozenRightRow=i,s.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=h({},e,s)}return e},e.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},e.prototype.selectedDataUpdate=function(e,t,i,s,l){for(var n=0,r=s.length;n<r;n++){var o=this.parent.getDataRows()[s[parseInt(n.toString(),10)]];this.parent.enableVirtualization&&(o=this.parent.getRowByIndex(s[parseInt(n.toString(),10)]));var a=this.getRowObj(o);a&&a.isDataRow&&a.isSelectable?(e.push(a.data),i.push(o),t.push(a.foreignKeyData)):this.isPartialSelection&&l&&l.splice(l.indexOf(s[parseInt(n.toString(),10)]),1)}},e.prototype.selectRows=function(e){var t=this,i=this.parent,l=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var o=[],h=[],d=this.getSelectedMovableRow(n),c=this.getSelectedFrozenRightRow(n),p=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(p,h,o,e,l),this.activeTarget();var g={cancel:!1,rowIndexes:l,row:o,rowIndex:n,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:p,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:h};g=this.addMovableArgs(g,d,c),this.parent.trigger(r.Od5,this.fDataUpdate(g),function(e){if(!(0,s.le)(e)&&!0===e.cancel){t.disableInteracted();return}t.clearRow(),t.selectRowIndex(l.slice(-1)[0]);var p=function(e,s){if(t.updateRowSelection(i.getRowByIndex(e),e,s),i.isFrozenGrid()){var l=t.parent.getFrozenMode()===a.v3?i.getFrozenRightRowByIndex(e):void 0;t.selectMovableRow(i.getMovableRowByIndex(e),l,e)}t.updateRowProps(n)};if(t.isSingleSel())p(n);else for(var g=0;g<l.length;g++)p(l[g],!!i.enableVirtualization);e={rowIndexes:l,row:o,rowIndex:n,target:t.actualTarget,prevRow:i.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:h},e=t.addMovableArgs(e,d,c),t.isRowSelected&&t.onActionComplete(e,r.Ypq),t.isInteracted=!1})}},e.prototype.addRowsToSelection=function(e){var t,i=this.parent,l=this.target;this.isMultiSelection=!0;var n=[],o=[],a=[],h=i.getSelectedRowIndexes().concat(e),d=this.isSingleSel()?i.getRowByIndex(e[e.length-1]):i.getRowByIndex(e[0]),c=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),p=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if(!(!this.isRowType()||this.isEditing())||this.selectionSettings.checkboxOnly){var g=this.parent.getColumns().filter(function(e){return"checkbox"===e.type});this.isMultiCtrlRequest&&!g.length&&this.selectedDataUpdate(a,o,n,h);for(var u=0;u<e.length;u++){var C=e[u],f=this.getRowObj(C),S=this.selectedRowIndexes.indexOf(C)>-1;if(!this.isPartialSelection||!f||!f.isDataRow||f.isSelectable){if(this.selectRowIndex(C),S&&(g.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(r.bEA,[C],[f.data],[d],[f.foreignKeyData],l),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(C),1),this.selectedRecords.splice(this.selectedRecords.indexOf(d),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),d.removeAttribute("aria-selected"),this.addRemoveClassesForRow(d,!1,null,"e-selectionbackground","e-active"),c&&(this.selectedRecords.splice(this.selectedRecords.indexOf(c),1),c.removeAttribute("aria-selected"),this.addRemoveClassesForRow(c,!1,null,"e-selectionbackground","e-active")),p&&(this.selectedRecords.splice(this.selectedRecords.indexOf(p),1),p.removeAttribute("aria-selected"),this.addRemoveClassesForRow(p,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(r.kCr,[C],[f.data],[d],[f.foreignKeyData],l,[c],void 0,[p]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),t={cancel:!1,data:a.length?a:f.data,rowIndex:C,row:n.length?n:d,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:f.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:h},t=this.addMovableArgs(t,c,p),this.parent.trigger(r.Od5,this.fDataUpdate(t)),!(0,s.le)(t)&&!0===t.cancel){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(d,C),this.selectMovableRow(c,p,C)}if(S||(t={data:a.length?a:f.data,rowIndex:C,row:n.length?n:d,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:f.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:h},t=this.addMovableArgs(t,c,p),this.onActionComplete(t,r.Ypq)),this.isInteracted=!1,this.updateRowProps(C),this.isSingleSel())break}}}},e.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],s=e<=t?{i:e,max:t}:{i:t,max:e},l=s.i,n=s.max;l<=n;l++)i.push(l);return e>t&&i.reverse(),i},e.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},e.prototype.clearRowCallBack=function(){(!this.isCancelDeSelect||"Check"===this.parent.checkAllRows)&&(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},e.prototype.clearSelectedRow=function(e){if(this.toggle){var t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},e.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},e.prototype.getPkValue=function(e,t){return e&&(0,n.Ou)(e)?(0,n.RK)(e,t):t[""+e]},e.prototype.updatePersistCollection=function(e,t){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!(0,s.le)(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var l=this.getRowObj(e),n=l.data?this.getPkValue(this.primaryKey,l.data):null;if(null===n)return;l.isSelected=t,t&&!this.isPartialSelection||this.isPartialSelection&&l.isSelectable&&l.isSelected?(this.selectedRowState[""+n]=t,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(e){return i.getPkValue(i.primaryKey,e)===n})||this.persistSelectedData.push(l.data)):this.updatePersistDelete(n)}},e.prototype.updatePersistDelete=function(e,t){var i,s=this;delete this.selectedRowState[""+e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+e]=!0),this.persistSelectedData.some(function(t,l){return i=l,s.getPkValue(s.primaryKey,t)===e})&&(this.persistSelectedData.splice(i,1),t&&this.parent.partialSelectedRecords.splice(i,1))},e.prototype.updateCheckBoxes=function(e,t,i){if(!(0,s.le)(e)){var l=e.querySelector(".e-checkselect");(0,s.le)(l)||((0,n.jV)(l.nextElementSibling,t),(0,n.NB)(l,t),!(0,s.le)(this.checkedTarget)&&((0,s.le)(this.checkedTarget)||this.checkedTarget.classList.contains("e-checkselectall"))||this.setCheckAllState(i))}},e.prototype.updateRowSelection=function(e,t,i){if(e){this.selectedRowIndexes.push(t);var s=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&s>1&&this.selectedRowIndexes[s-2]===this.selectedRowIndexes[s-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var l=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(l=this.parent.contextMenuModule.cell),!l||i)return;this.focus.onClick({target:l},!0)}}},e.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=(0,n.Wn)(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!(0,s.le)(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},e.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var t=this.parent,i=this.parent.getDataRows(),s=[],l=[],n=[],o=[],h=[],d=[],c=this.target,p=0,g=this.selectedRowIndexes.length;p<g;p++){var u="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[parseInt(p.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(p.toString(),10)]],C=this.getRowObj(u);if(C&&(s.push(C.data),l.push(u),h.push(this.selectedRowIndexes[parseInt(p.toString(),10)]),d.push(C.foreignKeyData)),t.isFrozenGrid()){var f=t.getMovableRows();if(f&&f.length&&n.push(f[this.selectedRowIndexes[parseInt(p.toString(),10)]]),t.getFrozenMode()===a.v3){var S=t.getFrozenRightRows();S&&S.length&&o.push(S[this.selectedRowIndexes[parseInt(p.toString(),10)]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(r.bEA,h,s,l,d,c,n,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection){if("Intermediate"===e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall")))for(var t=0;t<e.selectedRecords.length;t++)e.updatePersistCollection(e.selectedRecords[parseInt(t.toString(),10)],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0)}e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1));return}for(var a=[].slice.call(i.filter(function(e){return e.hasAttribute("aria-selected")})),p=0;p<a.length;p++)e.disableUI||(a[parseInt(p.toString(),10)].removeAttribute("aria-selected"),e.addRemoveClassesForRow(a[parseInt(p.toString(),10)],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(a[parseInt(p.toString(),10)],!1),e.updateCheckBoxes(a[parseInt(p.toString(),10)]);for(var t=0,g=e.selectedRowIndexes.length;t<g;t++){var u=e.getSelectedMovableRow(e.selectedRowIndexes[parseInt(t.toString(),10)]);u&&(e.disableUI||(u.removeAttribute("aria-selected"),e.addRemoveClassesForRow(u,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(u),e.isPrevRowSelection||e.updatePersistCollection(u,!1));var C=e.getSelectedFrozenRightRow(e.selectedRowIndexes[parseInt(t.toString(),10)]);C&&(e.disableUI||(C.removeAttribute("aria-selected"),e.addRemoveClassesForRow(C,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(C),e.isPrevRowSelection||e.updatePersistCollection(C,!1))}e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(r.kCr,h,s,l,d,c,n,void 0,o),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))},o)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},e.prototype.rowDeselect=function(e,t,i,l,n,r,o,a,d){var c=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){var p=1===t.length&&1===this.deSelectedData.length,g={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!p&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete g.cancel;var u="rowIndexes",C="data",f="foreignKeyData";g.row=l,g.target=this.actualTarget,this.actualTarget&&!(0,s.le)((0,s.oq)(this.actualTarget,"thead"))||t.length>1?(g.rowIndex=t[0],g[""+u]=t):1===t.length&&(g[""+C]=g[""+C][0],g.row=g.row[0],g[""+f]=g[""+f][0],this.isAddRowsToSelection&&(g[""+u]=t)),this.parent.trigger(e,this.parent.isFrozenGrid()?h({},g,{mRow:o,frozenRightRow:d}):g,function(e){c.isCancelDeSelect=e.cancel,c.isCancelDeSelect&&(c.isRowClicked||c.isInteracted||c.checkSelectAllClicked)||(c.updatePersistCollection(l[0],!1),c.updateCheckBoxes(l[0],void 0,t[0]),o&&c.updateCheckBoxes(o[0],void 0,t[0]),d&&c.updateCheckBoxes(d[0],void 0,t[0])),void 0!==a&&a()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==a&&a()},e.prototype.getRowObj=function(e){return(void 0===e&&(e=this.currentIndex),(0,s.le)(e))?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})},e.prototype.getSelectedMovableCell=function(e){var t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null},e.prototype.selectCell=function(e,t){if(this.isCellType()){var i,l=this.parent,n=this.getSelectedMovableCell(e);n||(n=l.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var a=n.classList.contains("e-cellselectionbackground");(t=t?!(0,s.o8)(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&a:t)?this.successCallBack(i,t,e,n,o)(i):((i={data:o,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=n,i.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(r.Gu1,this.fDataUpdate(i),this.successCallBack(i,t,e,n,o)),this.cellselected=!0)}}},e.prototype.successCallBack=function(e,t,i,l,n){var o=this;return function(e){var a="currentCell";if(((0,s.le)(e)||!0!==e.cancel)&&(t||(e[""+a]=e[""+a]?e[""+a]:l),o.clearCell(),t||o.updateCellSelection(l,i.rowIndex,i.cellIndex),!t)){var h={data:n,cellIndex:i,currentCell:l,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};h.previousRowCellIndex=o.prevECIdxs,o.updateCellProps(i,i),o.onActionComplete(h,r.SDA)}}},e.prototype.getCellIndex=function(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)},e.prototype.selectCellsByRange=function(e,t){var i,l,n,o=this;if(this.isCellType()){var a=this.parent,h=this.getSelectedMovableCell(e),d=a.getFrozenColumns();h||(h=a.getCellFromIndex(e.rowIndex,e.cellIndex));var c=e,p=t=t||e;this.currentIndex=e.rowIndex;var g=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var u={data:g,cellIndex:e,currentCell:h,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};u.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(r.Gu1,this.fDataUpdate(u),function(u){if((0,s.le)(u)||!0!==u.cancel){if(o.clearCell(),e.rowIndex>t.rowIndex){var C=e;e=t,t=C}for(var f=e.rowIndex;f<=t.rowIndex;f++){0>o.selectionSettings.cellSelectionMode.indexOf("Box")?(i=f===e.rowIndex?e.cellIndex:0,l=f===t.rowIndex?t.cellIndex:o.getLastColIndex(f)):(i=e.cellIndex,l=t.cellIndex),n=[];for(var S=i<l?i:l,x=i>l?i:l;S<=x;S++)(h=d?S<d?a.getCellFromIndex(f,S):a.getMovableCellFromIndex(f,S):a.getCellFromIndex(f,S))&&(n.push(S),o.updateCellSelection(h),o.addAttribute(h));o.selectedRowCellIndexes.push({rowIndex:f,cellIndexes:n})}var m={data:g,cellIndex:p,currentCell:a.getCellFromIndex(p.rowIndex,p.cellIndex),selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};m.previousRowCellIndex=o.prevECIdxs,o.isDragged||(o.onActionComplete(m,r.SDA),o.cellselected=!0),o.updateCellProps(c,p)}})}}},e.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=this.getSelectedMovableCell(e[0]),s=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;var l=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:l,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};n.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(n,r.Gu1);for(var o=0,a=e.length;o<a;o++)for(var h=0,d=e[parseInt(o.toString(),10)].cellIndexes.length;h<d;h++)(i=s?e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]<s?t.getCellFromIndex(e[parseInt(o.toString(),10)].rowIndex,e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]):t.getMovableCellFromIndex(e[parseInt(o.toString(),10)].rowIndex,e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]):t.getCellFromIndex(e[parseInt(o.toString(),10)].rowIndex,e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[parseInt(o.toString(),10)].rowIndex,cellIndex:e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var c={data:l,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};c.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(c,r.SDA)}}},e.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,i,l,o=this.parent;this.currentIndex=e[0].rowIndex;var h=this.getCurrentBatchRecordChanges()[this.currentIndex],d=o.getFrozenLeftCount(),c=o.getMovableColumnsCount();if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var p=o.getColumnByIndex(e[0].cellIndex);(0,n.Gj)(this.parent,function(t,i){l=i[e[0].rowIndex]},[p.getFreezeTableName()&&p.getFreezeTableName()!==a.Uw?[]:o.getRowsObject(),"movable"===p.getFreezeTableName()?o.getMovableRowsObject():[],p.getFreezeTableName()===a.FP?o.getFrozenRightRowsObject():[]]),o.groupSettings.columns.length>0&&(l=o.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var g=[],u=0;u<e.length;u++){for(var C=e[u],f=0,S=this.selectedRowCellIndexes.length;f<S;f++)if(this.selectedRowCellIndexes[parseInt(f.toString(),10)].rowIndex===C.rowIndex){i=f;break}(t=this.getSelectedMovableCell(C))||(t=o.getCellFromIndex(C.rowIndex,this.getColIndex(C.rowIndex,C.cellIndex)));var x="movable"===p.getFreezeTableName()?C.cellIndex-d:p.getFreezeTableName()===a.FP?C.cellIndex-(d+c):C.cellIndex;o.groupSettings.columns.length>0?g.push(l.cells[x+o.groupSettings.columns.length].foreignKeyData):g.push(l.cells[parseInt(x.toString(),10)].foreignKeyData);var m={cancel:!1,data:h,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?o.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},I="previousRowCellIndex";m[""+I]=this.prevECIdxs;var w=i>-1;if(w){var R=this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes;R.indexOf(C.cellIndex)>-1?(this.cellDeselect(r.BvZ,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],h,[t],g),R.splice(R.indexOf(C.cellIndex),1),0===R.length&&this.selectedRowCellIndexes.splice(i,1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect(r.KfI,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],h,[t],g)):(w=!1,this.onActionBegin(m,r.Gu1),this.addRowCellIndex({rowIndex:C.rowIndex,cellIndex:C.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else{if(this.onActionBegin(m,r.Gu1),!(0,s.le)(m)&&!0===m.cancel)return;this.updateCellSelection(t,C.rowIndex,C.cellIndex)}if(!w){var y={data:h,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};y[""+I]=this.prevECIdxs,this.onActionComplete(y,r.SDA),this.cellselected=!0}this.updateCellProps(C,C)}}}},e.prototype.getColIndex=function(e,t){var i=this.parent.isFrozenGrid(),s=this.parent.getColumnByIndex(t),l=(0,n.w4)(this.parent,s,e);if(l){for(var r=0;r<l.length;r++)if(parseInt(l[parseInt(r.toString(),10)].getAttribute(a.qy),10)===t)return i&&("movable"===s.getFreezeTableName()?r+=this.parent.getFrozenLeftCount():s.getFreezeTableName()===a.FP&&(r+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),r}return -1},e.prototype.getLastColIndex=function(e){var t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(a.qy),10)},e.prototype.clearCell=function(){this.clearCellSelection()},e.prototype.cellDeselect=function(e,t,i,l,n){l[0]&&l[0].classList.contains(a.pM)&&this.updateCheckBoxes((0,s.oq)(l[0],"tr"));var r={cells:l,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,r),this.isPreventCellSelect=r.cancel},e.prototype.updateCellSelection=function(e,t,i){(0,s.le)(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(a.pM)&&this.updateCheckBoxes((0,s.oq)(e,"tr"),!0),this.addAttribute(e)},e.prototype.addAttribute=function(e){this.target=e,(0,s.le)(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},e.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},e.prototype.addRowCellIndex=function(e){for(var t,i,s=0,l=this.selectedRowCellIndexes.length;s<l;s++)if(this.selectedRowCellIndexes[parseInt(s.toString(),10)].rowIndex===e.rowIndex){t=!0,i=s;break}t?0>this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(e.cellIndex)&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},e.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,s=[],l=[],o=[],a=this.getCurrentBatchRecordChanges(),h=e.isFrozenGrid();this.hideAutoFill();for(var d=0,c=i.length;d<c;d++){s.push(a[i[parseInt(d.toString(),10)].rowIndex]);for(var p=this.getRowObj(i[parseInt(d.toString(),10)].rowIndex),g=0,u=i[parseInt(d.toString(),10)].cellIndexes.length;g<u;g++)if(h){var C=e.getColumnByIndex(i[parseInt(d.toString(),10)].cellIndexes[parseInt(g.toString(),10)]);l.push((0,n.EU)(this.parent,C,i[parseInt(d.toString(),10)].rowIndex,i[parseInt(d.toString(),10)].cellIndexes[parseInt(g.toString(),10)]))}else p.cells&&o.push(p.cells[i[parseInt(d.toString(),10)].cellIndexes[parseInt(g.toString(),10)]].foreignKeyData),l.push(e.getCellFromIndex(i[parseInt(d.toString(),10)].rowIndex,i[parseInt(d.toString(),10)].cellIndexes[parseInt(g.toString(),10)]))}if(this.cellDeselect(r.BvZ,i,s,l,o),!0!==this.isPreventCellSelect){for(var d=0,c=t.length;d<c;d++)t[parseInt(d.toString(),10)].classList.remove("e-cellselectionbackground"),t[parseInt(d.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(r.KfI,i,s,l,o)}}},e.prototype.getSelectedCellsElement=function(){var e,t=this.parent,i=t.getDataRows();t.isFrozenGrid()&&(e=t.getMovableDataRows(),i=t.addMovableRows(i,e),t.getFrozenMode()===a.v3&&(i=t.addMovableRows(i,t.getFrozenRightDataRows())));for(var s=[],l=0,n=i.length;l<n;l++)s=s.concat([].slice.call(i[parseInt(l.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return s},e.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,i=this.parent.element.getBoundingClientRect(),l=this.x,r=this.y,o=(0,n.bt)(e),h=o.x-i.left,d=o.y-i.top,c=(0,s.oq)(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(c||(c=(0,s.oq)(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),l>h&&(t=h,h=l,l=t),r>d&&(t=d,d=r,r=t),this.element.style.left=l+"px",this.element.style.top=r+"px",this.element.style.width=h-l+"px",this.element.style.height=d-r+"px"),c&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(c.getAttribute(a.ih),10);if(this.isCellDrag){var g=(0,n.Cf)(e.target,a.PO);g&&(this.startAFCell=this.startCell,this.endAFCell=(0,n.Cf)(e.target,a.PO),this.selectLikeExcel(e,p,parseInt(g.getAttribute(a.qy),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0}},e.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},e.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},e.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},e.prototype.isLastRow=function(e){var t=[].slice.call((0,s.oq)(e,a.gE).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},e.prototype.isFirstRow=function(e){var t=[].slice.call((0,s.oq)(e,a.gE).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},e.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},e.prototype.setBorders=function(e,t,i){var s=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(e){return""===e.style.display});if(s.length){var l=this.parent.isFrozenGrid(),n=s[0],r=s[s.length-1],o=n.getBoundingClientRect(),h=r.getBoundingClientRect(),d=n.offsetParent.getBoundingClientRect(),c=this.isLastRow(r)&&("1"===i||"2"===i||"5"===i)?2:0,p=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(n)?1.5:0,g=l&&("2"===i||"4"===i)&&this.isFirstCell(n)?1:0,u=("Right"===this.parent.getFrozenMode()&&("1"===i||"3"===i)||this.parent.getFrozenMode()===a.v3&&("5"===i||"6"===i))&&this.isFirstCell(n)?1:0;this.parent.enableRtl?(t.style.right=d.right-o.right-g+"px",t.style.width=o.right-h.left+g+1+"px"):(t.style.left=o.left-d.left-g-u+"px",t.style.width=h.right-o.left+g-u+1+"px"),t.style.top=o.top-d.top-p+"px",t.style.height=h.top-o.top>0?h.top-d.top+h.height+1-(o.top-d.top)-c+p+"px":h.height+p-c+1+"px",this.selectDirection+=i}else t.style.display="none"},e.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===a.v3&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===a.v3&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},e.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},e.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===a.v3)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},e.prototype.createBorders=function(){!this.bdrElement&&(this.bdrElement=this.parent.getContentTable().parentElement.appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===a.v3&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===a.v3&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild((0,s.az)("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},e.prototype.showHideBorders=function(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,this.parent.getFrozenMode()===a.v3&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,this.parent.getFrozenMode()===a.v3&&(this.frhBdrElement.style.display=e)))},e.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},e.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,s=t.top-e.top>=0&&((0,n.Cf)(this.startAFCell,a.L2)||(0,n.Cf)(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,l=((0,n.Cf)(this.startAFCell,a.L2)||(0,n.Cf)(this.startAFCell,a.Hx))&&this.isFirstCell(this.startAFCell)?1:0,r=this.isLastRow(this.endAFCell)&&((0,n.Cf)(this.endAFCell,a.L2)||(0,n.Cf)(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),h=this.parent.element.getBoundingClientRect(),d=this.startAFCell.offsetParent.parentElement.scrollTop,c=this.startAFCell.offsetParent.parentElement.scrollLeft,p=d-this.startAFCell.offsetTop,g=c-this.startAFCell.offsetLeft,u=this.parent.element.clientHeight,C=this.parent.element.clientWidth;p=p>0?Math.floor(p)-1:0,g=g>0?g:0;var f=e.left-h.left;if(this.parent.enableRtl){var S=(0,n.Cf)(this.startAFCell,a.L2)||(0,n.Cf)(this.startAFCell,a.Hx)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-h.left:0;this.bdrAFLeft.style.right=h.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=C<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=h.right-e.right-l+S-1+"px",this.bdrAFTop.style.left=t.left-h.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-l+1+"px",0>parseInt(this.bdrAFTop.style.left,10)&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=f-l+g-1+"px",this.bdrAFRight.style.left=t.left-h.left-2+t.width+"px",this.bdrAFRight.style.width=C<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=f+g-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-l+1+"px",C<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var x=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-C;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-x+"px"}if(this.bdrAFLeft.style.top=e.top-h.top-s+p+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-o.top+t.height+1-(e.top-o.top)+s-r-p+"px":t.height+s-r-p+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=u<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,u<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var m=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-u;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-m+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},e.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild((0,s.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild((0,s.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild((0,s.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild((0,s.az)("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},e.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},e.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},e.prototype.updateValue=function(e,t,i){var s=this.createBeforeAutoFill(e,t,i);if(!s.cancel){var l=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&("number"===l.type?this.parent.editModule.updateCell(e,l.field,parseFloat(s.value)):this.parent.editModule.updateCell(e,l.field,s.value))}},e.prototype.createBeforeAutoFill=function(e,t,i){var s={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger(r.de3,s),s},e.prototype.getAutoFillCells=function(e,t){var i=".e-cellselectionbackground",s=[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(i));return this.parent.isFrozenGrid()&&(s=s.concat([].slice.call(this.parent.getMovableDataRows()[parseInt(e.toString(),10)].querySelectorAll(i))),this.parent.getFrozenMode()===a.v3&&(s=s.concat([].slice.call(this.parent.getFrozenRightDataRows()[parseInt(e.toString(),10)].querySelectorAll(i))))),s},e.prototype.selectLikeAutoFill=function(e,t){var i=parseInt((0,n.Cf)(this.startAFCell,a.O7).getAttribute(a.ih),10),s=parseInt(this.startAFCell.getAttribute(a.qy),10),l=parseInt((0,n.Cf)(this.endAFCell,a.O7).getAttribute(a.ih),10),r=parseInt(this.endAFCell.getAttribute(a.qy),10),o=this.selectedRowCellIndexes.length-1,h=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!(0,n.Cf)(e.target,a.PO):this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.parent.getCellFromIndex(i+o,s+h),this.drawAFBorders();break;case this.autoFillRLselection&&s+h<r&&r-s-h+1>l-i-o&&r-s-h+1>i-l:if(this.endAFCell=this.parent.getCellFromIndex(i+o,r),l=parseInt((0,n.Cf)(this.endAFCell,a.O7).getAttribute(a.ih),10),r=parseInt(this.endAFCell.getAttribute(a.qy),10),t){for(var d=parseInt(this.endCell.getAttribute(a.qy),10),c=i;c<=l;c++)for(var p=this.getAutoFillCells(c,s),g=0,u=d+1;u<=r;u++)g>h&&(g=0),this.updateValue(c,u,p[parseInt(g.toString(),10)]),g++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:l,cellIndex:r})}else this.drawAFBorders();break;case this.autoFillRLselection&&s>r&&s-r+1>l-i-o&&s-r+1>i-l:if(this.startAFCell=this.parent.getCellFromIndex(i,r),this.endAFCell=this.endCell,t){for(var c=i;c<=i+o;c++){var p=this.getAutoFillCells(c,s);p.reverse();for(var g=0,u=this.startCellIndex-1;u>=r;u--)g>h&&(g=0),this.updateValue(c,u,p[parseInt(g.toString(),10)]),g++}this.selectCellsByRange({rowIndex:i,cellIndex:r},{rowIndex:i+o,cellIndex:this.startCellIndex+h})}else this.drawAFBorders();break;case i>l:if(this.startAFCell=this.parent.getCellFromIndex(l,s),this.endAFCell=this.endCell,t){for(var C=parseInt(this.endCell.parentElement.getAttribute(a.ih),10),f=C,c=i-1;c>=l;c--){f===this.startIndex-1&&(f=C);var p=this.getAutoFillCells(f,s),g=0;f--;for(var u=this.startCellIndex;u<=this.startCellIndex+h;u++)this.updateValue(c,u,p[parseInt(g.toString(),10)]),g++}this.selectCellsByRange({rowIndex:l,cellIndex:s+h},{rowIndex:i+o,cellIndex:s})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(l,s+h),t){for(var C=parseInt(this.endCell.parentElement.getAttribute(a.ih),10),f=this.startIndex,c=C+1;c<=l;c++){f===C+1&&(f=this.startIndex);var p=this.getAutoFillCells(f,s);f++;for(var g=0,S=this.startCellIndex;S<=this.startCellIndex+h;S++)this.updateValue(c,S,p[parseInt(g.toString(),10)]),g++}this.selectCellsByRange({rowIndex:C-o,cellIndex:s},{rowIndex:l,cellIndex:s+h})}else this.drawAFBorders()}},e.prototype.mouseUpHandler=function(e){document.body.classList.remove("e-disableuserselect"),this.element&&(0,s.Od)(this.element),this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?this.mUPTarget=(0,n.Cf)(e.target,a.PO):this.mUPTarget=null;var t=(0,s.oq)(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&t&&t.classList.contains(a.PO)){var i=parseInt(t.parentElement.getAttribute(a.ih),10),l=parseInt(t.getAttribute(a.qy),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:l})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var r=(0,n.Cf)(e.target,a.PO);this.endAFCell=r||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}s.bi.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&s.bi.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),s.bi.remove(document,"mouseup",this.mouseUpHandler)},e.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},e.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(a.qy),10),t=parseInt(this.target.getAttribute("index"),10),i=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,l=this.getAutoFillCells(i,e).filter(function(e){return""===e.style.display}),r=this.parent.getColumnByIndex(e),o="movable"===r.getFreezeTableName(),h=t<this.parent.frozenRows,d=this.parent.getFrozenMode()===a.v3&&r.getFreezeTableName()===a.FP;!(0,s.Ys)("#"+this.parent.element.id+"_autofill",(0,n.Cf)(this.target,a.Kz))&&((0,s.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element)&&(0,s.Ys)("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=(0,s.az)("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",h?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),d&&(h?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var c=l[l.length-1];if(c&&c.offsetParent){var p=c.getBoundingClientRect(),g=c.offsetParent.getBoundingClientRect(),u=this.isLastCell(c)?4:0,C=this.isLastRow(c)?3:0;this.parent.enableRtl?this.autofill.style.right=g.right-p.right+p.width-4-u+"px":this.autofill.style.left=p.left-g.left+p.width-4-u+"px",this.autofill.style.top=p.top-g.top+p.height-5-C+"px"}this.autofill.style.display=""}else this.hideAutoFill()},e.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var t,i=e.target,l=this.parent,r=(0,n.Cf)(i,"e-grid");if(!(r&&r.id!==l.element.id||(0,n.Cf)(i,a.Vd)&&!this.parent.frozenRows||(0,n.Cf)(i,"e-editedbatchcell")||(0,n.Cf)(i,a.fX))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),(0,n.Cf)(i,a.PO)&&!e.shiftKey&&!e.ctrlKey){if(!(l.selectionSettings.cellSelectionMode.indexOf("Box")>-1)||this.isRowType()||this.isSingleSel()){if(l.allowRowDragAndDrop&&!l.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||(0,s.oq)(i,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}t=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),l.getContent().appendChild(this.element)}}else this.isCellDrag=!0,t=!0;t&&this.enableDrag(e,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(a.ih),10),this.startCellIndex=parseInt((0,n.Cf)(this.startCell,a.PO).getAttribute(a.qy),10))},e.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(a.ih),10),this.startCellIndex=parseInt((0,n.Cf)(this.startCell,a.PO).getAttribute(a.qy),10))},e.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var l=(0,s.oq)(e.target,"tr");this.startDIndex=parseInt(l.getAttribute(a.ih),10),this.startDCellIndex=parseInt((0,n.Cf)(e.target,a.PO).getAttribute(a.qy),10)}document.body.classList.add("e-disableuserselect");var r=i.element.getBoundingClientRect(),o=(0,n.bt)(e);this.x=o.x-r.left,this.y=o.y-r.top,s.bi.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&s.bi.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),s.bi.add(document,"mouseup",this.mouseUpHandler,this)},e.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;if("virtualscroll"===e.requestType||this.parent.isPersistSelection||t||this.clearSelection(),("virtualscroll"===e.requestType||t)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(e){return e.isSelectable}),s=[];this.selectedRowState={},this.persistSelectedData=[];for(var l=0;l<i.length;l++){s.push(i[parseInt(l.toString(),10)].index);var n=this.getPkValue(this.primaryKey,i[parseInt(l.toString(),10)].data);this.selectedRowState[""+n]=!0,this.persistSelectedData.push(i[parseInt(l.toString(),10)].data)}this.selectedRowIndexes=s}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:r.vxT,handler:this.enableAfterRender},{event:r.XrU,handler:this.initializeSelection},{event:r.eDT,handler:this.onActionComplete},{event:r.bhi,handler:this.onActionComplete},{event:r.HjP,handler:this.onPropertyChanged},{event:r.C$S,handler:this.onCellFocused},{event:r.Zgy,handler:this.clearSelAfterRefresh},{event:r.iLX,handler:this.columnPositionChanged},{event:r.GEE,handler:this.initialEnd},{event:r.cY3,handler:this.rowsRemoved},{event:r.lxn,handler:this.refreshHeader},{event:r.ob2,handler:this.destroy}],(0,n.aL)(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(r.m2U,this.actionBeginFunction),this.parent.addEventListener(r.i8$,this.actionCompleteFunction),this.addEventListener_checkbox())},e.prototype.removeEventListener=function(){this.parent.isDestroyed||((0,n.aL)(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(r.m2U,this.actionBeginFunction),this.parent.removeEventListener(r.i8$,this.actionCompleteFunction),this.removeEventListener_checkbox())},e.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(s.bi.add(this.parent.element,"keydown",this.keyDownHandler,this),s.bi.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||s.bi.add(this.parent.element,"keydown",this.keyDownHandler,this)},e.prototype.unWireEvents=function(){this.isMacOS?(s.bi.remove(this.parent.element,"keydown",this.keyDownHandler),s.bi.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||s.bi.remove(this.parent.element,"keydown",this.keyDownHandler)},e.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},e.prototype.refreshHeader=function(){this.setCheckAllState()},e.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++){var i=this.getPkValue(this.primaryKey,e.records[parseInt(t.toString(),10)]);delete this.selectedRowState[""+i],--this.totalRecordsCount}this.setCheckAllState()},e.prototype.beforeFragAppend=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},e.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},e.prototype.render=function(e){s.bi.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),s.bi.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;(0,s.le)(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(0,s.le)(e.properties.mode)&&(0,s.le)(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(e){return"checkbox"===e.type}).length&&(t.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}},e.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},e.prototype.initialEnd=function(e){var t=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===a.v3;t&&(!t||i||e.args.isFrozen)&&(!i||!e.args.renderFrozenRightContent)||this.selectedRowIndexes.length||(this.parent.off(r.GEE,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},e.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(r.GEE,this.checkBoxSelectionChanged);var t=e.getColumns().filter(function(e){return"checkbox"===e.type});t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,(0,s.le)(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},e.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},e.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){var t=this.parent.getDataModule(),i=new l.A().where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var s=t.getData({},i),n=this;this.parent.showSpinner(),s.then(function(e){n.dataSuccess(e.result),n.refreshPersistSelection(),n.parent.hideSpinner()})}},e.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);(0,s.le)(this.selectedRowState[""+i])&&e[parseInt(t.toString(),10)][this.chkField]&&(this.selectedRowState[""+i]=e[parseInt(t.toString(),10)][this.chkField])}this.persistSelectedData=e},e.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result){if(e){var t=Object.keys(this.selectedRowState),i=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var l=0,n=this.parent.currentViewData;l<n.length;l++){var r=n[l],o=r[this.primaryKey].toString();-1===t.indexOf(o)&&-1===i.indexOf(o)&&(this.selectedRowState[r[this.primaryKey]]=!0)}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1}else if(e){if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var a=this.parent.getRowsObject().filter(function(e){return e.isSelectable}),h=0;h<a.length;h++){var d=a[h];this.selectedRowState[this.getPkValue(this.primaryKey,d.data)]=!0}else{var c=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var p=0,g=this.isPartialSelection?c:c.records;p<g.length;p++){var r=g[p];this.selectedRowState[this.getPkValue(this.primaryKey,r)]=!0}else for(var u=0;u<c.length;u++){var r=c[u];this.selectedRowState[this.getPkValue(this.primaryKey,r)]=!0}}}else this.selectedRowState={}},e.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},e.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),this.parent.getFrozenMode()===a.v3&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!(0,s.le)(e)&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var l=this.getRowObj(e[parseInt(i.toString(),10)]),r=l&&l.data?this.getPkValue(this.primaryKey,l.data):null;if(null===r)return;if(!this.isPartialSelection||l.isSelectable){var o=void 0,h=e[parseInt(i.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+r]||"Check"===this.parent.checkAllRows&&this.selectedRowState[""+r]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&0>this.chkAllCollec.indexOf(r)||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(r)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!(0,s.le)(this.chkField)&&l.data[this.chkField]?(t.push(parseInt(e[parseInt(i.toString(),10)].getAttribute(a.ih),10)),o=!0):(o=!1,this.checkedTarget!==h&&this.parent.isCheckBoxSelection&&h&&(0,n.jV)(h.nextElementSibling,o)),this.updatePersistCollection(e[parseInt(i.toString(),10)],o)}}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},e.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!(0,s.le)(t)){var i=(0,s.oq)(t,"."+a.fX);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var l=this.getRowObj(i);if(!l)return;this.selectedRowState[this.getPkValue(this.primaryKey,l.data)]=l.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===e.requestType&&(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[]),("filtering"===e.requestType||"searching"===e.requestType)&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},e.prototype.actionComplete=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action){if(this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,t.data)]=t.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){for(var i=e.data.slice(),l=0;l<i.length;l++){var n=this.getPkValue(this.primaryKey,i[parseInt(l.toString(),10)]);(0,s.le)(n)||this.updatePersistDelete(n,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===e.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var r=this.parent.getRowsObject(),o=[],l=0;l<r.length;l++)r[parseInt(l.toString(),10)].isSelectable&&o.push(r[parseInt(l.toString(),10)].index);o.length&&this.selectRows(o)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},e.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground"))&&!!this.parent.getSelectedRows().length,this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),t=[],i=0;i<e.length;i++)e[parseInt(i.toString(),10)].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}},e.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[parseInt(i.toString(),10)],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},e.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!(0,s.le)(i)){var l=i.querySelector(".e-edit-checkselect");(0,s.le)(l)||(0,n.jV)(l.nextElementSibling,e)}},e.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),l="Check"===i;this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&("Uncheck"===i||this.isCheckboxReset)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,"Intermediate"===i&&(l=this.getCurrentBatchRecordChanges().some(function(e){return t.getPkValue(t.primaryKey,e) in t.selectedRowState})),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!l),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!l)},e.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None"},e.prototype.checkSelect=function(e){var t=(0,s.oq)(this.checkedTarget,"."+a.PO),i=this.parent;this.isMultiCtrlRequest=!0;var l=0;if(this.isHeaderCheckboxClicked=!1,(0,n.MU)(i)){var r=t.parentElement.getAttribute("data-uid");l=i.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(r)}else l=parseInt(t.parentElement.getAttribute(a.ih),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(a.gY).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++l,this.rowCellSelectionHandler(l,parseInt(t.getAttribute(a.qy),10)),this.moveIntoUncheckCollection((0,s.oq)(t,"."+a.O7)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},e.prototype.moveIntoUncheckCollection=function(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var t=this.getRowObj(e),i=t&&t.data?this.getPkValue(this.primaryKey,t.data):null;i&&(0>this.chkAllCollec.indexOf(i)?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1))}},e.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger(r.ru1,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},e.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var e=this.parent.getRowsObject().filter(function(e){return e.isSelectable}),t=0;t<e.length;t++){var i=e[t];this.selectedRowIndexes.push(i.index)}},e.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection){if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=this.getData().length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{var l=this.parent.getRowByIndex(e);if(e&&l&&"false"===l.getAttribute("aria-selected")){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}}},e.prototype.isAllSelected=function(e){if(this.isPartialSelection){if(!this.parent.allowPaging||!(this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount))return this.isSelectAllRowCount(e);for(var t=this.parent.partialSelectedRecords,i=0;i<t.length;i++){var s=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+s])return!1}return!0}for(var t=this.getData(),i=0;i<t.length;i++){var s=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+s])return!1}return!0},e.prototype.someDataSelected=function(){for(var e=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}return!0},e.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=!1,l=!1,r=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(r=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(l=!0,i=this.isAllSelected(r));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;(0,s.IV)([a],["e-check","e-stop","e-uncheck"]),(0,n.NB)(o,!1),o.indeterminate=!1,i&&l&&this.getData().length||!l&&(r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(r)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&this.getData().length&&r===this.getData().length||(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&r===this.parent.totalDataRecordsCount||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(r))))?((0,s.cn)([a],["e-check"]),(0,n.NB)(o,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!l||l&&this.someDataSelected())||0===r&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===r||r&&l&&this.someDataSelected())?((0,s.cn)([a],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===r&&0===this.getCurrentBatchRecordChanges().length?(0,s.cn)([a.parentElement],["e-checkbox-disabled"]):(0,s.IV)([a.parentElement],["e-checkbox-disabled"])):((0,s.cn)([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(e){return e.isSelectable}).length&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?(0,s.cn)([a.parentElement],["e-checkbox-disabled"]):(0,s.IV)([a.parentElement],["e-checkbox-disabled"])),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(e)}}},e.prototype.isSelectAllRowCount=function(e){var t=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()||!(0,s.le)(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(t=i.filter(function(e){return e.isSelectable}).length)&&e===t:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(t=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&e===this.parent.partialSelectedRecords.length:(t=i.filter(function(e){return e.isSelectable}).length)&&e===t},e.prototype.keyDownHandler=function(e){(("chrome"===s.AR.info.name||"safari"===s.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===s.AR.info.name&&17===e.keyCode||"mozilla"===s.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0);var t=(0,n.Cf)(e.target,"e-headercell"),i=(0,n.Cf)(e.target,a.PO);(t?t.children[0].classList.contains("e-headerchkcelldiv"):!!i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===e.keyCode&&e.preventDefault()},e.prototype.keyUpHandler=function(e){(("chrome"===s.AR.info.name||"safari"===s.AR.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===s.AR.info.name&&17===e.keyCode||"mozilla"===s.AR.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)},e.prototype.clickHandler=function(e){var t,i=e.target;this.actualTarget=i,this.selectionSettings.persistSelection&&(this.deSelectedData=(0,n.Wn)(this.persistSelectedData)),((0,n.Cf)(i,a.O7)||(0,n.Cf)(i,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&i.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(e);var l=!1;this.preventFocus=!0;var r=(0,n.Cf)(i,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(r&&r.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&(0,n.Cf)(i,a.O7)),this.selectionSettings.persistSelection&&this.isPartialSelection&&(0,n.Cf)(i,"e-headerchkcelldiv")&&!i.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),r&&r.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(t=r.querySelector('input[type="checkbox"]'),l=!0),this.drawBorders(),this.updateAutoFillPosition(),i=(0,n.Cf)(i,a.PO),this.parent.isReact&&i&&!i.parentElement&&i.classList.contains("e-rowcell")&&(i=this.parent.getCellFromIndex(parseInt(i.getAttribute("index"),10),parseInt(i.getAttribute("data-colindex"),10))),(i&&i.parentElement.classList.contains(a.O7)&&!this.parent.selectionSettings.checkboxOnly||l)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=i,(0,s.le)(t)){var o=this.parent,h=0;if((0,n.MU)(o)){var d=i.parentElement.getAttribute("data-uid");h=o.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(d)}else h=parseInt(i.parentElement.getAttribute(a.ih),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(a.gY).length>0&&++h,this.mUPTarget&&this.mUPTarget.isEqualNode(i)||this.rowCellSelectionHandler(h,parseInt(i.getAttribute(a.qy),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection((0,s.oq)(i,"."+a.O7)),this.setCheckAllState())}else this.checkedTarget=t,t.classList.contains("e-checkselectall")?this.checkSelectAll(t):this.checkSelect(t);this.parent.isCheckBoxSelection||!s.AR.isDevice||this.isSingleSel()||this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){var d=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(d))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,(0,s.le)((0,s.oq)(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},e.prototype.popUpClickHandler=function(e){var t=e.target;(0,s.oq)(t,".e-headercell")||e.target.classList.contains(a.PO)||(0,s.oq)(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||(0,n.ZJ)(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},e.prototype.rowCellSelectionHandler=function(e,t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(!this.parent.isCheckBoxSelection&&(this.parent.isCheckBoxSelection||(0,s.oq)(this.target,"."+a.PO).classList.contains(a.pM))?this.addRowsToSelection([e]):this.selectRowsByRange((0,s.o8)(this.prevRowIndex)?e:this.prevRowIndex,e),this.selectCellsByRange((0,s.o8)(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1},e.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey){if("upArrow"===e.keyArgs.action)this.parent.allowFiltering?e.isJump="INPUT"===e.element.tagName:e.isJump="TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){var t=Number(e.element.parentElement.getAttribute(a.ih));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0)}var i=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),l=e.container.isHeader&&"TD"!==e.element.tagName&&!(0,s.oq)(e.element,"."+a.PO)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||i){i&&!this.parent.isCheckBoxSelection&&this.clearSelection();return}var n=e.container.isContent?e.container.indexes:e.indexes,r=n[0],o=n[1],h=this.focus.getPrevIndexes();if(this.parent.frozenRows){if(e.container.isHeader&&("TD"===e.element.tagName||(0,s.oq)(e.element,"."+a.PO))){var d=this.parent.getHeaderTable().querySelector("thead").childElementCount;r-=d,h.rowIndex=(0,s.le)(h.rowIndex)?null:h.rowIndex-d}else r+=this.parent.frozenRows,h.rowIndex=0!==h.rowIndex&&(0,s.le)(h.rowIndex)?null:h.rowIndex+this.parent.frozenRows}if(this.parent.isFrozenGrid()){var c=Number(e.element.getAttribute(a.qy)),p=this.parent.getSelectedRowCellIndexes();p.length&&0===h.cellIndex&&(h.cellIndex=p[p.length-1].cellIndexes[0]),h.cellIndex=(0,s.le)(h.cellIndex)?null:h.cellIndex===o?c:c-1,o=c}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(r=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!l&&(-1!==["ctrlPlusA","escape"].indexOf(e.keyArgs.action)||"space"===e.keyArgs.action||r!==h.rowIndex||o!==h.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var g=this.getKeyColIndex(e);if(this.needColumnSelection&&(o=g),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===e.keyArgs.action||"shiftTab"===e.keyArgs.action||"rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)){var u=this.target.getAttribute("aria-label");u=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(o).field,this.target.setAttribute("aria-label",u)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(r,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(r,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(r,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(r,o);break;case"home":case"end":o="end"===e.keyArgs.action?this.getLastColIndex(r):0,this.applyHomeEndKey(r,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(r,o);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(r)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}},e.prototype.getKeyColIndex=function(e){var t,i=null,s=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&(0,n.Cf)(e.element,"e-columnheader")){if(this.needColumnSelection=!!e.container.isHeader,s){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=s.getAttribute("e-mappinguid");var l=this.getstackedColumns(this.parent.getColumnByUid(t).columns),r=this.parent.getColumnIndexByUid(l[l.length-1].uid),o=this.parent.getColumnIndexByUid(l[0].uid);i=this.prevColIndex>=r?o:r}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"))}return i},e.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},e.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},e.prototype.applyDownUpKey=function(e,t){var i=this.parent;!this.parent.isCheckBoxSelection||"Check"!==this.parent.checkAllRows||this.selectionSettings.persistSelection||this.selectionSettings.checkboxOnly||(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows,this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},e.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute(a.qy),10),i=this.parent.getFrozenColumns();if(i)t>=i?this.target=this.contentRenderer.getMovableRowByIndex(e).getElementsByClassName(a.PO)[t-i]:this.target=this.contentRenderer.getRowByIndex(e).getElementsByClassName(a.PO)[parseInt(t.toString(),10)];else{var s=this.contentRenderer.getRowByIndex(e);s&&(this.target=s.getElementsByClassName(a.PO)[parseInt(t.toString(),10)])}if(this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var l=this.target.getAttribute("aria-label");l=this.target.innerHTML,this.target.setAttribute("aria-label",l)}}},e.prototype.applyRightLeftKey=function(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},e.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},e.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&((0,s.o8)(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.getstackedColumns=function(e){for(var t=[],i=0,s=e.length;i<s;i++)e[parseInt(i.toString(),10)].columns?this.getstackedColumns(e[parseInt(i.toString(),10)].columns):t.push(e[parseInt(i.toString(),10)]);return t},e.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},e.prototype.addRemoveClassesForRow=function(e,t,i){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];if(e){var r=[].slice.call(e.getElementsByClassName(a.PO)),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),h=e.querySelector(".e-rowdragdrop");o&&r.push(o),h&&r.push(h),n.xZ.apply(void 0,[r,t].concat(s))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},e.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},e.prototype.getRenderer=function(){return(0,s.le)(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(o.y2.Content)),this.contentRenderer},e.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):this.persistSelectedData},e.prototype.selectColumn=function(e){var t=this.parent;if(!(0,s.le)(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnByIndex(e),l=t.getColumnHeaderByUid(i.uid),n=l.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||o){var a={columnIndex:e,headerCell:l,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,r.aUU),a.cancel){this.disableInteracted();return}(!(t.selectionSettings.enableToggle&&e===this.prevColIndex&&n)||o)&&this.updateColSelection(l,e);var h={columnIndex:e,headerCell:l,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(h,r.JfJ)}this.updateColProps(e)}}},e.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!(0,s.le)(i.getColumns()[parseInt(e.toString(),10)])){var l=[];if("Single"===i.selectionSettings.type||(0,s.le)(t))l[0]=e;else for(var n=e<t,r=e;n?r<=t:r>=t;n?r++:r--)l.push(r);this.selectColumns(l)}},e.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),t.selectionSettings.allowColumnSelection){this.clearColDependency();var s={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,r.aUU),s.cancel){this.disableInteracted();return}for(var l=0,n=e.length;l<n;l++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[parseInt(l.toString(),10)]).uid),e[parseInt(l.toString(),10)]);i=this.getselectedCols();var o={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,r.JfJ),this.updateColProps(e[0])}},e.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!(0,s.le)(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),l=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:l,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,r.aUU),n.cancel){this.disableInteracted();return}this.updateColSelection(i,e);var o={columnIndex:e,headerCell:l=this.getselectedCols(),column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,r.JfJ)}this.updateColProps(e)}}},e.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if((0,s.le)(e)||-1!==this.selectedColumnsIndexes.indexOf(e)){var i=(0,s.le)(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,l=t.getColumnByIndex(i),o=void 0,h=t.getColumnByIndex(i);o=l.getFreezeTableName()===a.FP?t.getFrozenRightColumnHeaderByIndex(i):"movable"===l.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(h.uid);var d={columnIndex:i,headerCell:o,columnIndexes:this.selectedColumnsIndexes,column:h,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(d,r.KtR)){this.disableInteracted();return}for(var c=(0,s.le)(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[o],p=this.getSelectedColumnCells(e),g=0,u=c.length;g<u;g++)(0,n.xZ)([c[parseInt(g.toString(),10)]],!1,"e-columnselection");for(var g=0,u=p.length;g<u;g++)(0,n.xZ)([p[parseInt(g.toString(),10)]],!1,"e-columnselection");(0,s.le)(e)?(this.columnDeselect(d,r.OJx),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(e){return e.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}}},e.prototype.getselectedCols=function(){var e,t=this.parent;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},e.prototype.getSelectedColumnCells=function(e){var t,i,l=this.parent,n=!(0,s.le)(this.parent.rowTemplate),r=n?l.getRows():l.getDataRows();l.isFrozenGrid()&&l.getContent().querySelector("."+a.L2)&&(t=n?l.getMovableRows():l.getMovableDataRows(),r=l.addMovableRows(r,t),l.getFrozenMode()===a.v3&&(i=n?l.getFrozenRightRows():l.getFrozenRightDataRows(),r=l.addMovableRows(r,i)));for(var o=[],h=(0,s.le)(e)?".e-columnselection":'[data-colindex="'+e+'"]',d=0,c=r.length;d<c;d++)o=o.concat([].slice.call(r[parseInt(d.toString(),10)].querySelectorAll(h)));return o},e.prototype.columnDeselect=function(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel},e.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},e.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},e.prototype.updateColSelection=function(e,t){if(!(0,s.le)(this.parent.getColumns()[parseInt(t.toString(),10)])){var i,l=this.parent.getFrozenLeftCount(),r=this.parent.getMovableColumnsCount(),o=this.parent.getColumnByIndex(t),h=!(0,s.le)(this.parent.rowTemplate);this.selectedColumnsIndexes.push(t),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!0,o.getFreezeTableName()===a.FP?(t-=l+r,i=h?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===o.getFreezeTableName()?(t-=l,i=h?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),i=h?this.parent.getRows():this.parent.getDataRows()),(0,n.xZ)([e],!0,"e-columnselection");for(var d=0,c=i.length;d<c;d++)i[parseInt(d.toString(),10)].classList.contains(a.O7)&&((i[parseInt(d.toString(),10)].classList.contains(a.fX)||i[parseInt(d.toString(),10)].classList.contains(a.gY))&&"Normal"===this.parent.editSettings.mode&&!(0,s.le)(i[parseInt(d.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)])?(0,n.xZ)([i[parseInt(d.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection"):(0,s.le)(i[parseInt(d.toString(),10)].childNodes[parseInt(t.toString(),10)])||(0,n.xZ)([i[parseInt(d.toString(),10)].childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection"))}},e.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange((0,s.o8)(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},e.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(r.mHp,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(r.rud,this.onDataBoundFunction),this.parent.on(r.EOz,this.onDataBoundFunction),this.parent.on(r.GEE,this.checkBoxSelectionChanged,this),this.parent.on(r.WOt,this.initPerisistSelection,this),this.parent.on(r.c$N,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(r.i8$,this.actionCompleteFunc),this.parent.on(r.V4S,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(r.d$w,this.resizeEndFn)},e.prototype.removeEventListener_checkbox=function(){this.parent.off(r.mHp,this.dataReady),this.parent.removeEventListener(r.rud,this.onDataBoundFunction),this.parent.removeEventListener(r.i8$,this.actionCompleteFunc),this.parent.off(r.EOz,this.onDataBoundFunction),this.parent.off(r.c$N,this.setCheckAllForEmptyGrid),this.parent.off(r.V4S,this.clickHandler),this.parent.off(r.WOt,this.initPerisistSelection)},e.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var t=e.nextElementSibling;(0,s.IV)([t],["e-check","e-stop","e-uncheck"])}},e.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},e.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},e.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,(0,s.le)(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},e.prototype.disableInteracted=function(){this.isInteracted=!1},e.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},e}()}}]);